# Design Concept Generator

è¨­è¨ˆæ§‹æƒ³æ›¸ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ãŸã‚ã® Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚AWS Amplify ã‚’ä½¿ç”¨ã—ãŸèªè¨¼æ©Ÿèƒ½ã¨ã€ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆæ©Ÿèƒ½ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š

- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: è¨­è¨ˆæ§‹æƒ³æ›¸ã€å•†å“ä¼ç”»æ›¸ã€è£½å“ä¼ç”»æ›¸ãªã©ã®å…¥åŠ›è³‡æ–™ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (S3)
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé¸æŠ**: ãƒ†ãƒ¼ãƒ«ã‚²ãƒ¼ãƒˆã€ãƒ•ãƒ­ãƒ³ãƒˆãƒãƒ³ãƒ‘ãƒ¼ã€ãƒ•ãƒ¼ãƒ‰ãªã©ã®å¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é¸æŠ
- **Real RAG ç”Ÿæˆ**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸè³‡æ–™ã®ä¸­èº«ã‚’è§£æã—ã€AWS Bedrock (Claude 3.5 Sonnet) ã‚’ä½¿ç”¨ã—ã¦è¨­è¨ˆæ§‹æƒ³æ›¸ã‚’è‡ªå‹•ç”Ÿæˆ
- **å¼•ç”¨ä»˜ããƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è³‡æ–™ã«åŸºã¥ã„ãŸå›ç­”ã¨ã€ãã®æ ¹æ‹ ã¨ãªã‚‹è³‡æ–™åã®æ˜ç¤º
- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¤œç´¢ (Real Web Search)**: è³‡æ–™ã«ãªã„æƒ…å ±ã¯ Tavily AI Search API ã‚’ä½¿ç”¨ã—ã¦ã‚¦ã‚§ãƒ–å…¨ä½“ã‹ã‚‰æœ€æ–°æƒ…å ±ã‚’å–å¾—
- **ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æçŠ¶æ³ï¼ˆå‡¦ç†ä¸­/æº–å‚™å®Œäº†ï¼‰ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å¯è¦–åŒ–
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤º**: ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰ã‚’ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¡¨ç¤º
- **èªè¨¼æ©Ÿèƒ½**: AWS Amplify ã«ã‚ˆã‚‹å®‰å…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼

## ğŸš€ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14.2.16 (App Router)
- **è¨€èª**: TypeScript
- **UI**: React 18.3.1
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS 4.0
- **èªè¨¼**: AWS Amplify 6.6.1
- **æ¤œç´¢API**: Tavily AI Search API
- **é–‹ç™ºç’°å¢ƒ**: Node.js 20+

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
design-concept/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx           # ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ login/             # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ components/            # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ AuthProvider.tsx   # èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
â”‚   â””â”€â”€ Chatbot.tsx        # ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ
â”œâ”€â”€ amplify/               # Amplify ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®šç¾©
â”‚   â”œâ”€â”€ auth/              # èªè¨¼ãƒªã‚½ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ data/              # ãƒ‡ãƒ¼ã‚¿ãƒªã‚½ãƒ¼ã‚¹ (AppSync)
â”‚   â”œâ”€â”€ storage/           # ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒªã‚½ãƒ¼ã‚¹ (S3)
â”‚   â””â”€â”€ functions/         # Lambdaé–¢æ•°
â”‚       â””â”€â”€ rag-chat/      # RAGãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ (Tavilyé€£æº)
â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ public/                # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ package.json          # ä¾å­˜é–¢ä¿‚
```

## ğŸ”§ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Node.js 20 ä»¥ä¸Š
- npm ã¾ãŸã¯ yarnã€pnpmã€bun
- **Tavily API Key** (æ¤œç´¢æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ)

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼‰
cd C:\cairo\design-concept

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
```

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ [http://localhost:3000](http://localhost:3000) ã‚’é–‹ã„ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚

## ğŸ“ ä½¿ã„æ–¹

1. **ãƒ­ã‚°ã‚¤ãƒ³**: AWS Amplify èªè¨¼ã§ãƒ­ã‚°ã‚¤ãƒ³
2. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: ä»¥ä¸‹ã®è³‡æ–™ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - è¨­è¨ˆæ§‹æƒ³æ›¸
   - å•†å“ä¼ç”»æ›¸
   - è£½å“ä¼ç”»æ›¸
   - ãƒãƒ¼ãƒ‰ã‚¦ã‚¨ã‚¢è¨­è¨ˆè€…ã®å¯¾å¿œã™ã‚‹ãƒªã‚¹ãƒˆ
   - å°‚é–€å®¶ã®ç ”ç©¶è³‡æ–™
   - æ³•è¦ãƒªã‚¹ãƒˆ
3. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé¸æŠ**: å¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é¸æŠ
4. **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã€Œæº–å‚™å®Œäº†ã€ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
5. **ç”Ÿæˆ**: è¨­è¨ˆæ§‹æƒ³æ›¸ã‚’ç”Ÿæˆ

## ğŸ› ï¸ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run start

# ãƒªãƒ³ãƒˆ
npm run lint
```

## â˜ï¸ AWS Amplify Setup

### 1. å‰ææ¡ä»¶
- AWS ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- AWS CLI ãŒè¨­å®šæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š (Secrets)
ã‚¦ã‚§ãƒ–æ¤œç´¢æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€Amplify Console ã§ä»¥ä¸‹ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
1. Amplify Console > ã‚¢ãƒ—ãƒªé¸æŠ > Hosting > Secrets
2. `Manage secrets` ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã®ã‚­ãƒ¼ã¨å€¤ã‚’è¨­å®š:
   - Key: `TAVILY_API_KEY`
   - Value: `tvly-xxxx...` (ã‚ãªãŸã®Tavily APIã‚­ãƒ¼)

### 3. ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ (Sandbox)
ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ã€Sandboxã‚’èµ·å‹•ã—ã¾ã™ã€‚

```bash
npx ampx sandbox
```
ã“ã‚Œã«ã‚ˆã‚Šã€éš”é›¢ã•ã‚ŒãŸAWSç’°å¢ƒãŒãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã•ã‚Œã€`amplify_outputs.json` ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

### 4. ãƒ‡ãƒ—ãƒ­ã‚¤
GitHubãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã€Amplify Consoleã¾ãŸã¯Vercelã§ãƒªãƒã‚¸ãƒˆãƒªã‚’æ¥ç¶šã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

## ğŸ” èªè¨¼

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ AWS Amplify ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚`AuthProvider` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒèªè¨¼çŠ¶æ…‹ã‚’ç®¡ç†ã—ã€æœªèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¾ã™ã€‚

## ğŸ“¦ ä¸»ãªä¾å­˜é–¢ä¿‚

- `next`: Next.js ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `react` / `react-dom`: React ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- `aws-amplify`: AWS Amplify SDK
- `@aws-amplify/ui-react`: Amplify UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `tailwindcss`: CSS ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `typescript`: TypeScript
- `pdf-parse`: PDFãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
- `axios`: HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Tavily APIç”¨)

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ (Real RAG)

```mermaid
graph TD
    User[User] -->|Uploads File| UX[Next.js Frontend]
    UX -->|Saves to| S3[S3 Bucket]
    User -->|Asks Question| UX
    UX -->|Calls| AppSync[AppSync API]
    AppSync -->|Invokes| Lambda[Lambda (rag-chat)]
    Lambda -->|Reads| S3
    Lambda -->|Extracts Text| Parser[PDF/Excel Parser]
    Lambda -->|Generates Answer| Bedrock[AWS Bedrock (Claude 3.5 Sonnet)]
    Bedrock -->|Returns| Lambda
    Lambda -- "Not found?" --> Tavily[Tavily Search API]
    Tavily -- "Web Results" --> Lambda
    Lambda -->|Response + Citations| UX
```

### RAG (Retrieval-Augmented Generation) ãƒ•ãƒ­ãƒ¼
1.  ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè³‡æ–™ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (S3 `public/` ãƒ•ã‚©ãƒ«ãƒ€)
2.  ãƒãƒ£ãƒƒãƒˆã¾ãŸã¯ç”Ÿæˆãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã«ã€Lambdaé–¢æ•°ãŒèµ·å‹•
3.  LambdaãŒS3ã‹ã‚‰é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º (Context Stuffing)
4.  æŠ½å‡ºã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã¨è³ªå•ã‚’ Bedrock (Claude 3.5 Sonnet) ã«é€ä¿¡
5.  æƒ…å ±ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€**Tavily API** ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¤œç´¢ã‚’å®Ÿè¡Œ
6.  æ¤œç´¢çµæœã‚’å«ã‚ã¦å†å›ç­”ã‚’ç”Ÿæˆ
7.  å›ç­”ã¨ã¨ã‚‚ã«ã€å‚ç…§ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã¾ãŸã¯URLã‚’å¼•ç”¨ã¨ã—ã¦è¿”å´



## â˜ï¸ AWS Resources (Deployed)

| Resource Type | Resource Name / ID |
| :--- | :--- |
| **App ID** | `d36x7v8ch44hay` |
| **Region** | `ap-northeast-1` |
| **S3 Bucket** | `amplify-d36x7v8ch44hay-ma-designconceptfilesbucket-bsc5b7uvescf` |
| **User Pool ID** | `ap-northeast-1_6hAFP3QRB` |
| **User Pool Client ID** | `5rmelidmev9jpmbq4f9sh0mkce` |
| **Identity Pool ID** | `ap-northeast-1:0e8b395b-accc-43fc-ae66-9e1b6329e958` |
| **GraphQL API Endpoint** | `https://doefvmocm5a2vplpaytoybboqa.appsync-api.ap-northeast-1.amazonaws.com/graphql` |

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Private

## ğŸ‘¥ ä½œæˆè€…

Cairo Plus
